Часть 1: Основы работы с файлами
Описание задачи: Создайте консольное приложение, которое позволяет пользователю вводить строки текста. Эти строки должны записываться в текстовый файл (output.txt). Приложение должно поддерживать ввод до тех пор, пока пользователь не введет "exit". После выхода из программы должно происходить чтение и вывод содержимого файла на экран.

Требования:

Реализуйте асинхронный метод для записи данных в файл.
Используйте StreamWriter для записи строк в файл.
Убедитесь, что строки записываются в файл в кодировке UTF-8.
Используйте lock для защиты от конкурентного доступа, если в будущем будет реализована многопоточность.
Пример кода:

Используйте приведенный вами код FileProcessor и Program, но без семафоров и мьютексов.
Часть 2: Реализация многопоточности
Описание задачи: Модифицируйте консольное приложение из части 1, добавив возможность записи данных в файл из нескольких потоков одновременно. Используйте SemaphoreSlim, чтобы ограничить количество потоков, которые могут одновременно записывать в файл.

Требования:

Реализуйте метод записи с использованием SemaphoreSlim для ограничения количества потоков до 4.
Добавьте обработку ошибок на случай, если файл не может быть записан (например, если файл открыт другим процессом).
Обеспечьте асинхронное чтение содержимого файла после завершения записи данных.
Пример кода:

Используйте предоставленный вами код WriteToFileAsync и ReadFromFileAsync, обеспечив их вызов из нескольких параллельных задач.
Часть 3: Создание API для работы с файлами
Описание задачи: Создайте ASP.NET Core API, который будет принимать текстовое содержимое через HTTP-запрос и записывать его в файл. После записи API должен возвращать содержимое файла в виде текстового ответа.

Требования:

Реализуйте контроллер с методом ProcessFile, который принимает строку текста как параметр.
Используйте код из части 2 для записи и чтения содержимого файла.
Обработайте возможные ошибки, такие как отсутствие файла или проблемы с доступом к файлу, и возвращайте соответствующие коды состояния HTTP.
Добавьте маршрутизацию в Program.cs для поддержки вашего контроллера.
Пример кода:

Используйте предоставленный вами код для контроллера и конфигурации приложения. Обязательно добавьте обработку ошибок в метод ProcessFile.